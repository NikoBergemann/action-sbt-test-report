name: 'Test Code with Coverage and Reports'
description: 'Runs some sbt tests and produces cool reports.'

inputs:
  what-to-test:
    description: 'Name of Test Suite(s)'
    required: true
    default: '*'

runs:
    using: "composite"
    
    steps:
    # run tests
    - name: Run tests
      run: |
        echo "##########################"
        echo "#    starting test       #"
        echo "##########################"
        sbt coverage "testOnly ${{ inputs.what-to-test }}" coverageReport coverageAggregate
        echo "##########################"
        echo "#    finished test       #"
        echo "##########################"
      shell: bash